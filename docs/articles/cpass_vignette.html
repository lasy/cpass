<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to the `cpass` package • cpass</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to the `cpass` package">
<meta property="og:description" content="cpass">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cpass</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cpass_vignette.html">Introduction to the `cpass` package</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="cpass_vignette_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to the <code>cpass</code> package</h1>
            
      
      
      <div class="hidden name"><code>cpass_vignette.Rmd</code></div>

    </div>

    
    
<div id="installation-of-the-cpass-package" class="section level1">
<h1 class="hasAnchor">
<a href="#installation-of-the-cpass-package" class="anchor"></a>Installation of the <code>cpass</code> package</h1>
<p>Currently, the <code>cpass</code> package is hosted on the package author’s github repository.</p>
<p>To install it from github, install and load the package <code>devtool</code> by running:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span></code></pre></div>
<p>then install and load the <code>cpass</code> package by running:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"lasy/cpass"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lasy.github.io/cpass/">cpass</a></span><span class="op">)</span></code></pre></div>
<p>Note that the <code>cpass</code> package depends on several other packages (mostly packages from the <a href="https://www.tidyverse.org/"><code>tidyverse</code> suite</a>).</p>
<p>This vignette also uses <code>tidyverse</code> functions so it is recommended to install and load the <code>tidyverse</code> suite by running:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<p>Alternatively, individual packages can be loaded independently:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org">purrr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'magrittr'</span>
<span class="co">#&gt; The following object is masked from 'package:tidyr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     extract</span>
<span class="co">#&gt; The following object is masked from 'package:purrr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     set_names</span></code></pre></div>
</div>
<div id="demo-dataset" class="section level1">
<h1 class="hasAnchor">
<a href="#demo-dataset" class="anchor"></a>Demo dataset</h1>
<p>To explore the <code>cpass</code> package, we will use a demo dataset with the data (daily ratings) from 20 subjects. This demo dataset is attached to the <code>cpass</code> package and documented in <code><a href="../reference/PMDD_data.html">?PMDD_data</a></code>.</p>
<p>To load this data into the environment, run:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d</span> <span class="op">=</span> <span class="va">PMDD_data</span>

<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>
<span class="co">#&gt; [1] 12432     6</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 6</span>
<span class="co">#&gt;   subject cycle phase   day  item drsp_score</span>
<span class="co">#&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1       2     1 pre      -7     1          1</span>
<span class="co">#&gt; 2       2     1 pre      -7     2          1</span>
<span class="co">#&gt; 3       2     1 pre      -7     3          1</span>
<span class="co">#&gt; 4       2     1 pre      -7     4          1</span>
<span class="co">#&gt; 5       2     1 pre      -7     5          1</span>
<span class="co">#&gt; 6       2     1 pre      -7     6          1</span></code></pre></div>
</div>
<div id="overview-of-the-package-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#overview-of-the-package-functions" class="anchor"></a>Overview of the package functions</h1>
<p>The <code>cpass</code> package contains 3 types of functions:</p>
<ol style="list-style-type: decimal">
<li><p>a data formatting function <code><a href="../reference/as_cpass_data.html">as_cpass_data()</a></code> which first checks the format of the data you would like to analyse with the <code>cpass</code> package, then formats it for diagnosis and/or visualizations</p></li>
<li><p>a PMDD/MRMD/PME diagnosis function <code><a href="../reference/cpass.html">cpass()</a></code></p></li>
<li><p>visualization functions: <code><a href="../reference/plot_subject_obs.html">plot_subject_obs()</a></code>, <code><a href="../reference/plot_subject_cycle_obs.html">plot_subject_cycle_obs()</a></code>, <code><a href="../reference/plot_subject_dx.html">plot_subject_dx()</a></code> and <code><a href="../reference/plot_subject_data_and_dx.html">plot_subject_data_and_dx()</a></code></p></li>
</ol>
<p>A typical <code>cpass</code> workflow consists of</p>
<ul>
<li><p>loading (and formatting) raw data from a <code>.csv</code> or <code>.xls</code> file</p></li>
<li><p>preparing them for diagnosis with the <code><a href="../reference/as_cpass_data.html">as_cpass_data()</a></code></p></li>
<li><p>running the <code><a href="../reference/cpass.html">cpass()</a></code> function on these data and extract some general statistics about the diagnoses</p></li>
<li><p>visually explore the data of specific subjects with the visualization functions.</p></li>
</ul>
</div>
<div id="package-demo" class="section level1">
<h1 class="hasAnchor">
<a href="#package-demo" class="anchor"></a>Package demo</h1>
<div id="formating-raw-data-into-cpass_data" class="section level2">
<h2 class="hasAnchor">
<a href="#formating-raw-data-into-cpass_data" class="anchor"></a>Formating raw data into <code>cpass_data</code>
</h2>
<p>The function <code><a href="../reference/as_cpass_data.html">as_cpass_data()</a></code> transforms raw data into <code>cpass_data</code>. The data provided as argument to <code><a href="../reference/as_cpass_data.html">as_cpass_data()</a></code> must be in long format, <em>i.e.</em> one row per subject, cycle, day and DRSP (daily record of severity of problems) item (<em>i.e.</em>, the symptom diary used to collect the data for a C-PASS diagnosis).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">input</span> <span class="op">=</span> <span class="fu"><a href="../reference/as_cpass_data.html">as_cpass_data</a></span><span class="op">(</span><span class="va">d</span>, sep_event <span class="op">=</span> <span class="st">"menses"</span><span class="op">)</span>
<span class="co">#&gt; Number of subjects:  20 </span>
<span class="co">#&gt; Total number of cycles:  37 </span>
<span class="co">#&gt; Percentage of missing scores:  3.23 %</span>
<span class="co">#&gt; Warning in as_cpass_data(d, sep_event = "menses"): The 'phase' column will be over-written</span>
<span class="co">#&gt; Percentage of missing scores (in pre- &amp; post-menstrual phases):  NA %</span></code></pre></div>
<p>For the full documentation, type <code><a href="../reference/as_cpass_data.html">?as_cpass_data</a></code> in the <code>R console</code>.</p>
</div>
<div id="running-the-cpass-procedure-for-pmddmrmdpme-diagnosis" class="section level2">
<h2 class="hasAnchor">
<a href="#running-the-cpass-procedure-for-pmddmrmdpme-diagnosis" class="anchor"></a>Running the CPASS procedure for PMDD/MRMD/PME diagnosis</h2>
<p>Now that the data is formatted, it can be passed to the <code>CPASS()</code> function. This function will run the CPASS procedure for PMDD/MRMD (and optionally PME) diagnoses:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">diagnosis</span> <span class="op">=</span> <span class="fu"><a href="../reference/cpass.html">cpass</a></span><span class="op">(</span><span class="va">input</span><span class="op">)</span>
<span class="co">#&gt; PME diagnosis is still experimentaland has not be validated clinically. Please, use with caution.</span></code></pre></div>
<p>For the full documentation, type <code>?CPASS</code> in the <code>R console</code>.</p>
<p>The <code>CPASS</code> function returns a list of 6 tables:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">diagnosis</span><span class="op">)</span>
<span class="co">#&gt; [1] "subject_level_diagnosis"      "cycle_level_diagnosis"       </span>
<span class="co">#&gt; [3] "DSM5_domains_level_diagnosis" "item_level_diagnosis"        </span>
<span class="co">#&gt; [5] "daily_summary_per_item"       "summary_item"</span></code></pre></div>
<p>Let’s have a look at the first table:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">diagnosis</span><span class="op">$</span><span class="va">subject_level_diagnosis</span>
<span class="co">#&gt; # A tibble: 20 x 15</span>
<span class="co">#&gt;    subject Ncycles_tot Ncycles N_PMDD N_MRMD N_PME pmddcycprop mrmdcycprop</span>
<span class="co">#&gt;      &lt;dbl&gt;       &lt;int&gt;   &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;int&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1       2           2       2      2      2     2       1           1    </span>
<span class="co">#&gt;  2      15           1       1     NA     NA    NA      NA          NA    </span>
<span class="co">#&gt;  3      17           2       2      0      1     0       0           0.5  </span>
<span class="co">#&gt;  4      21           2       2      0      0     0       0           0    </span>
<span class="co">#&gt;  5      25           2       2      0      2     1       0           1    </span>
<span class="co">#&gt;  6      27           2       2      0      1     1       0           0.5  </span>
<span class="co">#&gt;  7      33           1       1     NA     NA    NA      NA          NA    </span>
<span class="co">#&gt;  8      36           2       2      1      1     1       0.5         0.5  </span>
<span class="co">#&gt;  9      44           2       2      1      1     1       0.5         0.5  </span>
<span class="co">#&gt; 10      47           3       3      1      1     1       0.333       0.333</span>
<span class="co">#&gt; 11      48           1       1     NA     NA    NA      NA          NA    </span>
<span class="co">#&gt; 12      49           2       2      0      1     0       0           0.5  </span>
<span class="co">#&gt; 13      60           1       1     NA     NA    NA      NA          NA    </span>
<span class="co">#&gt; 14      95           1       1     NA     NA    NA      NA          NA    </span>
<span class="co">#&gt; 15     117           2       2      1      1     2       0.5         0.5  </span>
<span class="co">#&gt; 16     122           3       3      0      2     1       0           0.667</span>
<span class="co">#&gt; 17     147           2       2      1      1     1       0.5         0.5  </span>
<span class="co">#&gt; 18     158           2       2      1      2     2       0.5         1    </span>
<span class="co">#&gt; 19     162           2       2      2      2     2       1           1    </span>
<span class="co">#&gt; 20     178           2       2      2      2     2       1           1    </span>
<span class="co">#&gt; # … with 7 more variables: pmecycprop &lt;dbl&gt;, PMDD &lt;lgl&gt;, MRMD &lt;lgl&gt;, PME &lt;lgl&gt;,</span>
<span class="co">#&gt; #   dxcat &lt;dbl&gt;, dx &lt;chr&gt;, avgdsm5crit &lt;dbl&gt;</span></code></pre></div>
<p>This table has the diagnoses of the 20 subjects.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">diagnosis</span><span class="op">$</span><span class="va">subject_level_diagnosis</span><span class="op">$</span><span class="va">dx</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;         MRMD no diagnosis         PMDD          PME </span>
<span class="co">#&gt;            3            8            3            1</span></code></pre></div>
<p>3 subjects (~15%) have a PMDD diagnosis, 3 others have a MRMD diagnosis and 9 subjects (~45%) have no diagnosis based on their reported symptoms.</p>
<p>The remaining 5 subjects did not have sufficient data to make a diagnosis:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">diagnosis</span><span class="op">$</span><span class="va">subject_level_diagnosis</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">dx</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 15</span>
<span class="co">#&gt;   subject Ncycles_tot Ncycles N_PMDD N_MRMD N_PME pmddcycprop mrmdcycprop</span>
<span class="co">#&gt;     &lt;dbl&gt;       &lt;int&gt;   &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;int&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1      15           1       1     NA     NA    NA          NA          NA</span>
<span class="co">#&gt; 2      33           1       1     NA     NA    NA          NA          NA</span>
<span class="co">#&gt; 3      48           1       1     NA     NA    NA          NA          NA</span>
<span class="co">#&gt; 4      60           1       1     NA     NA    NA          NA          NA</span>
<span class="co">#&gt; 5      95           1       1     NA     NA    NA          NA          NA</span>
<span class="co">#&gt; # … with 7 more variables: pmecycprop &lt;dbl&gt;, PMDD &lt;lgl&gt;, MRMD &lt;lgl&gt;, PME &lt;lgl&gt;,</span>
<span class="co">#&gt; #   dxcat &lt;dbl&gt;, dx &lt;chr&gt;, avgdsm5crit &lt;dbl&gt;</span></code></pre></div>
<p>We see that each of these 5 subjects only reported DRSP for one cycle (instead of the two required).</p>
<p>Now, we can dive deeper into the data of particular subjects. For example, we can check the cycle-level diagnosis of subject <code>#47</code> who reported DRSP scores for 3 cycles.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">diagnosis</span><span class="op">$</span><span class="va">cycle_level_diagnosis</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subject</span> <span class="op">==</span> <span class="fl">47</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 9</span>
<span class="co">#&gt;   subject cycle included n_DSM5_domains_m… n_DSM5_domains_m… PME   DSM5_A DSM5_B</span>
<span class="co">#&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;                &lt;int&gt;             &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt;  &lt;lgl&gt; </span>
<span class="co">#&gt; 1      47     1 TRUE                     3                 0 FALSE FALSE  FALSE </span>
<span class="co">#&gt; 2      47     2 TRUE                     5                 5 TRUE  TRUE   TRUE  </span>
<span class="co">#&gt; 3      47     3 TRUE                     0                 0 FALSE FALSE  FALSE </span>
<span class="co">#&gt; # … with 1 more variable: diagnosis &lt;chr&gt;</span></code></pre></div>
<p>The second cycle of this subject fulfilled the criteria for a cycle-level PMDD diagnosis. The symptoms reported in the other cycles did not meet the criteria for PMDD nor for MRMD.</p>
<p>We can dive even deeper and look at the DRSP items during this cycle #2:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">diagnosis</span><span class="op">$</span><span class="va">item_level_diagnosis</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subject</span> <span class="op">==</span> <span class="fl">47</span>, <span class="va">cycle</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 24 x 16</span>
<span class="co">#&gt;    subject cycle  item at_least_n_obs max_sev_pre n_days_high_score mean_pre</span>
<span class="co">#&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;                &lt;dbl&gt;             &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1      47     2     1 TRUE                     1                 0     1   </span>
<span class="co">#&gt;  2      47     2     2 TRUE                     3                 0     1.43</span>
<span class="co">#&gt;  3      47     2     3 TRUE                     1                 0     1   </span>
<span class="co">#&gt;  4      47     2     4 TRUE                     5                 4     3.43</span>
<span class="co">#&gt;  5      47     2     5 TRUE                     6                 5     3.86</span>
<span class="co">#&gt;  6      47     2     6 TRUE                     1                 0     1   </span>
<span class="co">#&gt;  7      47     2     7 TRUE                     6                 5     4.43</span>
<span class="co">#&gt;  8      47     2     8 TRUE                     5                 5     3.83</span>
<span class="co">#&gt;  9      47     2     9 TRUE                     4                 1     1.86</span>
<span class="co">#&gt; 10      47     2    10 TRUE                     4                 2     2.71</span>
<span class="co">#&gt; # … with 14 more rows, and 9 more variables: mean_post &lt;dbl&gt;,</span>
<span class="co">#&gt; #   raw_cyclical_change &lt;dbl&gt;, range &lt;dbl&gt;, percent_change &lt;dbl&gt;,</span>
<span class="co">#&gt; #   max_sev_post &lt;dbl&gt;, item_meets_PMDD_criteria &lt;lgl&gt;,</span>
<span class="co">#&gt; #   item_meets_PME_criteria &lt;lgl&gt;, DSM5_SYMPTOM_DOMAIN &lt;chr&gt;,</span>
<span class="co">#&gt; #   SYMPTOM_CATEGORY &lt;chr&gt;</span></code></pre></div>
<p>As this is a large table which provides the criteria details for each item, we may only consider the following columns for now:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">diagnosis</span><span class="op">$</span><span class="va">item_level_diagnosis</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subject</span> <span class="op">==</span> <span class="fl">47</span>, <span class="va">cycle</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">subject</span>, <span class="va">cycle</span>, <span class="va">item</span>, <span class="va">item_meets_PMDD_criteria</span>, <span class="va">DSM5_SYMPTOM_DOMAIN</span><span class="op">)</span> <span class="op">%&gt;%</span>  
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;    subject cycle item item_meets_PMDD_criteria DSM5_SYMPTOM_DOMAIN</span>
<span class="co">#&gt; 1       47     2    1                    FALSE          DEPRESSION</span>
<span class="co">#&gt; 2       47     2    2                    FALSE          DEPRESSION</span>
<span class="co">#&gt; 3       47     2    3                    FALSE          DEPRESSION</span>
<span class="co">#&gt; 4       47     2    4                     TRUE             ANXIETY</span>
<span class="co">#&gt; 5       47     2    5                     TRUE       MOOD LABILITY</span>
<span class="co">#&gt; 6       47     2    6                    FALSE       MOOD LABILITY</span>
<span class="co">#&gt; 7       47     2    7                     TRUE               ANGER</span>
<span class="co">#&gt; 8       47     2    8                     TRUE               ANGER</span>
<span class="co">#&gt; 9       47     2    9                    FALSE            INTEREST</span>
<span class="co">#&gt; 10      47     2   10                    FALSE       CONCENTRATION</span>
<span class="co">#&gt; 11      47     2   11                    FALSE            LETHARGY</span>
<span class="co">#&gt; 12      47     2   12                    FALSE            APPETITE</span>
<span class="co">#&gt; 13      47     2   13                     TRUE            APPETITE</span>
<span class="co">#&gt; 14      47     2   14                    FALSE               SLEEP</span>
<span class="co">#&gt; 15      47     2   15                    FALSE               SLEEP</span>
<span class="co">#&gt; 16      47     2   16                    FALSE           OVERWHELM</span>
<span class="co">#&gt; 17      47     2   17                     TRUE           OVERWHELM</span>
<span class="co">#&gt; 18      47     2   18                    FALSE            PHYSICAL</span>
<span class="co">#&gt; 19      47     2   19                    FALSE            PHYSICAL</span>
<span class="co">#&gt; 20      47     2   20                    FALSE            PHYSICAL</span>
<span class="co">#&gt; 21      47     2   21                       NA            PHYSICAL</span>
<span class="co">#&gt; 22      47     2   22                    FALSE        INTERFERENCE</span>
<span class="co">#&gt; 23      47     2   23                    FALSE        INTERFERENCE</span>
<span class="co">#&gt; 24      47     2   24                    FALSE        INTERFERENCE</span></code></pre></div>
<p>And we observe that this subject mostly experienced severe anxiety, inability to control their mood, anger and feeling of overwhelm in the premenstrual phase of cycle 2.</p>
</div>
<div id="visualizing-subjects-data" class="section level2">
<h2 class="hasAnchor">
<a href="#visualizing-subjects-data" class="anchor"></a>Visualizing subjects data</h2>
<p>While the subject data and diagnoses can be explored by inspecting these tables, the <code>cpass</code> package comes with visualization functions which may help in the investigation of a specific subject’s data.</p>
<div id="visualizing-subjects-diagnoses" class="section level3">
<h3 class="hasAnchor">
<a href="#visualizing-subjects-diagnoses" class="anchor"></a>Visualizing subject’s diagnoses</h3>
<p>For example, one can have an overview of a subject diagnosis with the <code><a href="../reference/plot_subject_dx.html">plot_subject_dx()</a></code> function.</p>
<p>For the same subject #47, we run:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/plot_subject_dx.html">plot_subject_dx</a></span><span class="op">(</span><span class="va">input</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subject</span> <span class="op">==</span> <span class="fl">47</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="cpass_vignette_files/figure-html/plot-subject-diagnosis-1.png" width="100%"></p>
<p>The top panel provides the subject ID, their diagnosis, the number of cycles for which some scores were provided and the number of cycles that had enough data to be included in the diagnosis procedure. It also provides the number of cycles with a PMDD or a MRMD diagnosis.</p>
</div>
<div id="visualizing-subjects-reported-scores" class="section level3">
<h3 class="hasAnchor">
<a href="#visualizing-subjects-reported-scores" class="anchor"></a>Visualizing subject’s reported scores</h3>
<p>From the <code>cycle_level_dx</code> table from this subject, we know that cycle #2 fulfilled the PMDD criteria while other cycles did not.</p>
<p>To explore the scores reported during the 2nd cycle, the function <code><a href="../reference/plot_subject_cycle_obs.html">plot_subject_cycle_obs()</a></code> can be used. This function visualizes the reported score for a given cycle:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_subject_cycle_obs.html">plot_subject_cycle_obs</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">input</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subject</span> <span class="op">==</span> <span class="fl">47</span>, <span class="va">cycle</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; PME diagnosis is still experimental and has not be validated clinically.Please, use with caution.</span></code></pre></div>
<p><img src="cpass_vignette_files/figure-html/plot-cycle-1.png" width="100%"></p>
<p>The two left panels visualize the reported scores with the x-axis being the cycle-days (time) and each line of the y-axis representing one DRSP item. The score of each item for each day is written on the corresponding (x,y) rectangle. The color of the rectangle is proportional to the score. Low scores (1) are gray, high scores (6) are red. Missing scores are represented by transparent rectangles. The panels on the right visualize the items or domains or cycle that fulfill the PMDD criteria. If they do not meet the criteria, their corresponding rectangle is light-gray. If they meet the criteria, they are red. Items that are excluded from the diagnosis procedure are in dark-gray.</p>
<p>For this subject, we can compare their second cycle (above) with their third cycle:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_subject_cycle_obs.html">plot_subject_cycle_obs</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">input</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subject</span> <span class="op">==</span> <span class="fl">47</span>, <span class="va">cycle</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; PME diagnosis is still experimental and has not be validated clinically.Please, use with caution.</span></code></pre></div>
<p><img src="cpass_vignette_files/figure-html/plot-cycle-3-1.png" width="100%"></p>
<p>Note that the reported scores can be visualized without the diagnosis with the option <code>add_diagnosis = FALSE</code></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_subject_cycle_obs.html">plot_subject_cycle_obs</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">input</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subject</span> <span class="op">==</span> <span class="fl">47</span>, <span class="va">cycle</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span>, add_diagnosis <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="cpass_vignette_files/figure-html/plot-cycle-no-d-1.png" width="100%"></p>
<p>And that the color of the high score can be changed with the option <code>color_max_score = "desired_color"</code>:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_subject_cycle_obs.html">plot_subject_cycle_obs</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">input</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subject</span> <span class="op">==</span> <span class="fl">47</span>, <span class="va">cycle</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span>, color_max_score <span class="op">=</span> <span class="st">"turquoise"</span><span class="op">)</span>
<span class="co">#&gt; PME diagnosis is still experimental and has not be validated clinically.Please, use with caution.</span></code></pre></div>
<p><img src="cpass_vignette_files/figure-html/plot-cycle-color-1.png" width="100%"></p>
<p>It is also possible to visualize all cycles of a user at once with the function <code><a href="../reference/plot_subject_obs.html">plot_subject_obs()</a></code></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_subject_obs.html">plot_subject_obs</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">input</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subject</span> <span class="op">==</span> <span class="fl">47</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; PME diagnosis is still experimentaland has not be validated clinically.Please, use with caution.</span></code></pre></div>
<p><img src="cpass_vignette_files/figure-html/plot-obs-1.png" width="100%"></p>
</div>
<div id="visualizing-subjects-reported-scores-and-diagnosis" class="section level3">
<h3 class="hasAnchor">
<a href="#visualizing-subjects-reported-scores-and-diagnosis" class="anchor"></a>Visualizing subject’s reported scores and diagnosis</h3>
<p>And finally, the function <code><a href="../reference/plot_subject_data_and_dx.html">plot_subject_data_and_dx()</a></code> is useful to visualize at once all reported scores and the diagnoses summaries of a given subject.</p>
<p>Because this function may return large visualizations, by default, it prints the visualization to a pdf that has an appropriate size (<em>i.e.</em>, a height proportional to the number of cycles reported by the subject).</p>
<p>By default, the pdf is saved in the current directory and the filename specifies the subject ID but both the path and the pdf name can be specified via the options <code>pdf_path</code> and <code>pdf_name</code>.</p>
<p>The pdf option can also be turned off with the option <code>save_as_pdf = FALSE</code>. In this case, calling the function prints the visualization in R.</p>
<p>If the function is called with the option <code>save_as_pdf = TRUE</code> (default), the visualization is returned silently but could be caught by a variable (e.g. <code>viz = plot_subject_data_and_dx(data); viz</code>).</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/plot_subject_data_and_dx.html">plot_subject_data_and_dx</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">input</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subject</span> <span class="op">==</span> <span class="fl">47</span><span class="op">)</span>, save_as_pdf <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt; PME diagnosis is still experimentaland has not be validated clinically.Please, use with caution.</span></code></pre></div>
<p><img src="cpass_vignette_files/figure-html/plot-all-1.png" width="100%"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Laura Symul, Tory Eisenlohr-Moul.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
